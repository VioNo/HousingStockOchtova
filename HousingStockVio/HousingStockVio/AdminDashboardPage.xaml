<Page x:Class="HousingStockVio.AdminDashboardPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Дашборд администратора"
      Background="#FFFFFFFF">

    <Page.Resources>
        <ResourceDictionary Source="Styles.xaml"/>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Быстрый доступ -->
        <Border Grid.Row="0" 
                Background="White"
                BorderBrush="#FFCCCCCC"
                BorderThickness="0,0,0,1"
                Padding="0,0,0,20"
                Margin="0,0,0,20">
            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <Button Content="💰 Создать начисление" 
                            Style="{StaticResource PrimaryButton}"
                            Height="50"
                            MinWidth="200"
                            Margin="0,0,15,0"
                            Click="CreateAccrualButton_Click"/>

                    <Button Content="📅 Создать график" 
                            Style="{StaticResource SecondaryButton}"
                            Height="50"
                            MinWidth="180"
                            Margin="0,0,15,0"
                            Click="CreateScheduleButton_Click"/>

                    <Button Content="📊 Финансовый отчет" 
                            Style="{StaticResource SecondaryButton}"
                            Height="50"
                            MinWidth="180"
                            Margin="0,0,15,0"
                            Click="ViewReportButton_Click"/>

                    <Button Content="📋 Новые заявки" 
                            Style="{StaticResource SecondaryButton}"
                            Height="50"
                            MinWidth="160"
                            Margin="0,0,15,0"
                            Click="RefreshApplicationsButton_Click"/>

                    <!-- Убрана кнопка управления персоналом с дашборда -->
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Основные метрики -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Основные показатели в плитках -->
                <Grid Grid.Row="0" Margin="0,0,0,30">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Плитка 1: Дома -->
                    <Border Grid.Column="0" 
                            Background="#FFF4E8D3"
                            CornerRadius="12"
                            Margin="0,0,15,0"
                            Padding="25">
                        <StackPanel>
                            <TextBlock Text="🏢"
                                      FontSize="32"
                                      Margin="0,0,0,10"/>

                            <TextBlock Text="Всего домов"
                                      FontFamily="Segoe UI"
                                      FontSize="14"
                                      Foreground="#FF666666"
                                      Margin="0,0,0,5"/>

                            <TextBlock x:Name="TotalHousesText" 
                                      Text="0"
                                      FontFamily="Segoe UI"
                                      FontSize="36"
                                      FontWeight="Bold"
                                      Foreground="#FF333333"/>
                        </StackPanel>
                    </Border>

                    <!-- Плитка 2: Владельцы -->
                    <Border Grid.Column="1" 
                            Background="#FFF4E8D3"
                            CornerRadius="12"
                            Margin="0,0,15,0"
                            Padding="25">
                        <StackPanel>
                            <TextBlock Text="👤"
                                      FontSize="32"
                                      Margin="0,0,0,10"/>

                            <TextBlock Text="Владельцев"
                                      FontFamily="Segoe UI"
                                      FontSize="14"
                                      Foreground="#FF666666"
                                      Margin="0,0,0,5"/>

                            <TextBlock x:Name="TotalOwnersText" 
                                      Text="0"
                                      FontFamily="Segoe UI"
                                      FontSize="36"
                                      FontWeight="Bold"
                                      Foreground="#FF333333"/>
                        </StackPanel>
                    </Border>

                    <!-- Плитка 3: Начисления -->
                    <Border Grid.Column="2" 
                            Background="#FFF4E8D3"
                            CornerRadius="12"
                            Margin="0,0,15,0"
                            Padding="25">
                        <StackPanel>
                            <TextBlock Text="💰"
                                      FontSize="32"
                                      Margin="0,0,0,10"/>

                            <TextBlock Text="Всего начислено"
                                      FontFamily="Segoe UI"
                                      FontSize="14"
                                      Foreground="#FF666666"
                                      Margin="0,0,0,5"/>

                            <TextBlock x:Name="TotalAccruedText" 
                                      Text="0 руб."
                                      FontFamily="Segoe UI"
                                      FontSize="28"
                                      FontWeight="Bold"
                                      Foreground="#FF333333"/>
                        </StackPanel>
                    </Border>

                    <!-- Плитка 4: Оплаты -->
                    <Border Grid.Column="3" 
                            Background="#FFF4E8D3"
                            CornerRadius="12"
                            Padding="25">
                        <StackPanel>
                            <TextBlock Text="💳"
                                      FontSize="32"
                                      Margin="0,0,0,10"/>

                            <TextBlock Text="Всего оплачено"
                                      FontFamily="Segoe UI"
                                      FontSize="14"
                                      Foreground="#FF666666"
                                      Margin="0,0,0,5"/>

                            <TextBlock x:Name="TotalPaidText" 
                                      Text="0 руб."
                                      FontFamily="Segoe UI"
                                      FontSize="28"
                                      FontWeight="Bold"
                                      Foreground="#FF27AE60"/>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Финансовые метрики -->
                <Grid Grid.Row="1" Margin="0,0,0,30">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Финансовая карточка 1 -->
                    <Border Grid.Column="0" 
                            Background="White"
                            BorderBrush="#FFCCCCCC"
                            BorderThickness="1"
                            CornerRadius="12"
                            Margin="0,0,15,0"
                            Padding="25">
                        <StackPanel>
                            <TextBlock Text="📈 Месячный доход"
                                      FontFamily="Segoe UI"
                                      FontSize="16"
                                      FontWeight="SemiBold"
                                      Foreground="#FF333333"
                                      Margin="0,0,0,15"/>

                            <TextBlock x:Name="MonthlyIncomeText" 
                                      Text="0 руб."
                                      FontFamily="Segoe UI"
                                      FontSize="32"
                                      FontWeight="Bold"
                                      Foreground="#FF27AE60"/>

                            <TextBlock Text="за текущий месяц"
                                      FontFamily="Segoe UI"
                                      FontSize="14"
                                      Foreground="#FF666666"
                                      Margin="0,10,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- Финансовая карточка 2 -->
                    <Border Grid.Column="1" 
                            Background="White"
                            BorderBrush="#FFCCCCCC"
                            BorderThickness="1"
                            CornerRadius="12"
                            Margin="0,0,15,0"
                            Padding="25">
                        <StackPanel>
                            <TextBlock Text="💸 Общая задолженность"
                                      FontFamily="Segoe UI"
                                      FontSize="16"
                                      FontWeight="SemiBold"
                                      Foreground="#FF333333"
                                      Margin="0,0,0,15"/>

                            <TextBlock x:Name="TotalDebtText" 
                                      Text="0 руб."
                                      FontFamily="Segoe UI"
                                      FontSize="32"
                                      FontWeight="Bold"
                                      Foreground="#FFE74C3C"/>

                            <TextBlock Text="сумма всех долгов"
                                      FontFamily="Segoe UI"
                                      FontSize="14"
                                      Foreground="#FF666666"
                                      Margin="0,10,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- Финансовая карточка 3 -->
                    <Border Grid.Column="2" 
                            Background="White"
                            BorderBrush="#FFCCCCCC"
                            BorderThickness="1"
                            CornerRadius="12"
                            Padding="25">
                        <StackPanel>
                            <TextBlock Text="📊 Средний платеж"
                                      FontFamily="Segoe UI"
                                      FontSize="16"
                                      FontWeight="SemiBold"
                                      Foreground="#FF333333"
                                      Margin="0,0,0,15"/>

                            <TextBlock x:Name="AveragePaymentText" 
                                      Text="0 руб."
                                      FontFamily="Segoe UI"
                                      FontSize="32"
                                      FontWeight="Bold"
                                      Foreground="#FF333333"/>

                            <TextBlock Text="средний чек"
                                      FontFamily="Segoe UI"
                                      FontSize="14"
                                      Foreground="#FF666666"
                                      Margin="0,10,0,0"/>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Таблицы данных -->
                <TabControl Grid.Row="2" 
                           Background="Transparent"
                           BorderThickness="0">

                    <TabItem Header="🏢 ДОМА">
                        <Grid Background="White">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0" 
                                    Background="#FF67BA80"
                                    CornerRadius="8,8,0,0"
                                    Padding="20,15">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Text="ДОМА"
                                              FontFamily="Segoe UI"
                                              FontSize="18"
                                              FontWeight="Bold"
                                              Foreground="White"/>

                                    <Button Content="🔄 Обновить" 
                                            Grid.Column="1"
                                            Style="{StaticResource SecondaryButton}"
                                            Height="35" 
                                            Foreground="White"
                                            Background="Transparent"
                                            BorderBrush="White"
                                            Click="RefreshHousesButton_Click"/>
                                </Grid>
                            </Border>

                            <DataGrid x:Name="HousesGrid"
                                     Grid.Row="1"
                                     BorderThickness="0"
                                     AutoGenerateColumns="True"
                                     CanUserAddRows="False"
                                     IsReadOnly="True"
                                     SelectionMode="Single"/>
                        </Grid>
                    </TabItem>

                    <TabItem Header="👤 ВЛАДЕЛЬЦЫ">
                        <Grid Background="White">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0" 
                                    Background="#FF67BA80"
                                    CornerRadius="8,8,0,0"
                                    Padding="20,15">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Text="ВЛАДЕЛЬЦЫ"
                                              FontFamily="Segoe UI"
                                              FontSize="18"
                                              FontWeight="Bold"
                                              Foreground="White"/>

                                    <Button Content="🔄 Обновить" 
                                            Grid.Column="1"
                                            Style="{StaticResource SecondaryButton}"
                                            Height="35" 
                                            Foreground="White"
                                            Background="Transparent"
                                            BorderBrush="White"
                                            Click="RefreshOwnersButton_Click"/>
                                </Grid>
                            </Border>

                            <DataGrid x:Name="OwnersGrid"
                                     Grid.Row="1"
                                     BorderThickness="0"
                                     AutoGenerateColumns="True"
                                     CanUserAddRows="False"
                                     IsReadOnly="True"
                                     SelectionMode="Single"/>
                        </Grid>
                    </TabItem>

                    <TabItem Header="💰 ПЛАТЕЖИ">
                        <Grid Background="White">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0" 
                                    Background="#FF67BA80"
                                    CornerRadius="8,8,0,0"
                                    Padding="20,15">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Text="ПЛАТЕЖИ"
                                              FontFamily="Segoe UI"
                                              FontSize="18"
                                              FontWeight="Bold"
                                              Foreground="White"/>

                                    <Button Content="🔄 Обновить" 
                                            Grid.Column="1"
                                            Style="{StaticResource SecondaryButton}"
                                            Height="35" 
                                            Foreground="White"
                                            Background="Transparent"
                                            BorderBrush="White"
                                            Click="RefreshPaymentsButton_Click"/>
                                </Grid>
                            </Border>

                            <DataGrid x:Name="PaymentsGrid"
                                     Grid.Row="1"
                                     BorderThickness="0"
                                     AutoGenerateColumns="True"
                                     CanUserAddRows="False"
                                     IsReadOnly="True"
                                     SelectionMode="Single"/>
                        </Grid>
                    </TabItem>

                    <TabItem Header="💸 ДОЛГИ">
                        <Grid Background="White">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0" 
                                    Background="#FF67BA80"
                                    CornerRadius="8,8,0,0"
                                    Padding="20,15">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Text="ДОЛГИ"
                                              FontFamily="Segoe UI"
                                              FontSize="18"
                                              FontWeight="Bold"
                                              Foreground="White"/>

                                    <Button Content="🔄 Обновить" 
                                            Grid.Column="1"
                                            Style="{StaticResource SecondaryButton}"
                                            Height="35" 
                                            Foreground="White"
                                            Background="Transparent"
                                            BorderBrush="White"
                                            Click="RefreshDebtsButton_Click"/>
                                </Grid>
                            </Border>

                            <DataGrid x:Name="DebtsGrid"
                                     Grid.Row="1"
                                     BorderThickness="0"
                                     AutoGenerateColumns="True"
                                     CanUserAddRows="False"
                                     IsReadOnly="True"
                                     SelectionMode="Single"/>
                        </Grid>
                    </TabItem>

                    <TabItem Header="📋 ЗАЯВКИ">
                        <Grid Background="White">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0" 
                                    Background="#FF67BA80"
                                    CornerRadius="8,8,0,0"
                                    Padding="20,15">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Text="ЗАЯВКИ НА РЕМОНТ"
                                              FontFamily="Segoe UI"
                                              FontSize="18"
                                              FontWeight="Bold"
                                              Foreground="White"/>

                                    <Button Content="🔄 Обновить" 
                                            Grid.Column="1"
                                            Style="{StaticResource SecondaryButton}"
                                            Height="35" 
                                            Foreground="White"
                                            Background="Transparent"
                                            BorderBrush="White"
                                            Click="RefreshApplicationsButton_Click"/>
                                </Grid>
                            </Border>

                            <DataGrid x:Name="ApplicationsGrid"
                                     Grid.Row="1"
                                     BorderThickness="0"
                                     AutoGenerateColumns="True"
                                     CanUserAddRows="False"
                                     IsReadOnly="True"
                                     SelectionMode="Single"/>
                        </Grid>
                    </TabItem>

                </TabControl>
            </Grid>
        </ScrollViewer>
    </Grid>
</Page>